- Telegram 블로그 자동화에서 품질 검증(0.7) 실패로 80% 지점 중단 이슈 대응.
- 수정: `src/services/blog_workflow.py`
  - MIN_QUALITY_SCORE를 설정값에서 읽고 0~1 스케일로 정규화(70 입력도 허용).
  - soft pass 구간 도입: `QUALITY_SOFT_FAIL_MARGIN`(기본 0.1) 내에서는 경고와 함께 진행.
  - 품질 개선 포인트(issues) 추출/반환.
- 수정: `src/telegram/service_layer.py`
  - soft pass 시 텔레그램 성공 메시지에 품질 경고와 개선 포인트 표시.
- 수정: `src/config/settings.py`, `.env.example`
  - `QUALITY_SOFT_FAIL_MARGIN` 설정 추가, 예시 임계값 표기 0.7로 정리.
- 추가 수정: 네이버 업로드 실패 원인 보수.
  - 원인: `.env`의 `DATA_DIR=./data`가 상대경로여서, 업로드 subprocess의 cwd(`naver-poster`) 기준으로 `naver-poster/data/...`를 참조함.
  - 조치: `src/services/blog_workflow.py` `_upload_to_naver`에서 업로드 대상 디렉토리를 프로젝트 루트 기준 절대경로로 정규화 후 CLI에 전달.
  - 확인: `20260214(하이디라오 제주도점)_6`가 `/home/mini/dev/naverPost/data/...`로 해석되고 exists=True.
- 반복 DNS 장애 대응(근본 보강):
  - `src/utils/dns_fallback.py` 추가: system DNS 실패 시 `api.telegram.org`를 공용 DNS(1.1.1.1/8.8.8.8/9.9.9.9)로 직접 A 조회 후 `socket.getaddrinfo` 우회.
  - 공용 DNS 조회까지 막힌 경우를 대비해 텔레그램 API 기본 IP 풀 내장.
  - 환경변수 확장: `TELEGRAM_DNS_SERVERS`, `TELEGRAM_API_IPS`.
- `run_telegram_bot.py`에 DNS fallback 설치를 시작 초기에 적용.
- `run_telegram_bot.py` 재기동 루프 보강:
  - `SystemExit` 계열도 재시도로 흡수(`except BaseException`)해 비정상 종료 내성 강화.
- 네이버 임시저장 안정화(이미지 누락/오판정 대응) 착수:
  - `naver-poster`가 단계별 결과(A~G)와 이미지 포함 상태를 `NAVER_POST_RESULT_JSON`으로 출력하도록 확장.
  - 이미지 업로드를 `bool`에서 상세 결과 구조로 변경(파일 메타, 응답 추적, 재시도, 에디터 이미지 참조 검증).
  - Python `src/services/blog_workflow.py`에서 문자열 기반 판정을 제거하고 JSON 리포트 기반으로 `임시저장 성공`과 `이미지 포함 성공`을 분리.
  - 인증 오류 1회 자동 재로그인(`--autoLogin`) + 일시 오류(타임아웃/네트워크/429/5xx) 지수 백오프 재시도 추가.
  - 텔레그램 결과 메시지를 3단계(성공/경고/실패)로 분기하도록 `src/telegram/service_layer.py` 수정.
  - 재현 스모크 테스트 엔트리 추가: `naver-poster/scripts/smoke_test_post_draft_with_images.sh`.
- 실측 스모크(권한상승 환경) 결과:
  - 단일 이미지(`/tmp/naver_smoke_1`): `overall_status=SUCCESS_FULL`, `image_status=full`.
  - 5장 이미지(`/tmp/naver_smoke_5`): `overall_status=SUCCESS_TEXT_ONLY`, `image_status=none` 재현.
  - 서로 다른 5장(`/tmp/naver_smoke_5_unique`)도 동일하게 `SUCCESS_TEXT_ONLY` 재현(중복 파일 이슈 아님).
  - 강제 실패 모킹(`SIMULATE_IMAGE_UPLOAD_FAILURE=timeout`): `overall_status=SUCCESS_TEXT_ONLY`, `image_status=none`.
  - 병렬(다중 이미지) 시나리오에서도 동일하게 `SUCCESS_TEXT_ONLY` 재현.
  - 수정: 다중 선택 업로드 대신 단건 순차 업로드 모드 도입.
  - 수정 후 재검증:
    - `/tmp/naver_smoke_5` => `SUCCESS_FULL`, 이미지 5/5 포함
    - `/tmp/naver_smoke_5_unique` => `SUCCESS_FULL`, 이미지 5/5 포함
    - `SIMULATE_IMAGE_UPLOAD_FAILURE=timeout` => `SUCCESS_TEXT_ONLY` 유지(의도된 경고 분기 정상)
  - 결론: “임시저장 성공 + 이미지 누락”을 상태머신으로 명확히 분리해 관측 가능해짐.
